var orm = require("../lib/ORM");

orm.connect("mysql://root:tedua@localhost/orm?debug=true", function (err, db) {
	if (err) {
		throw err;
	}

	var Person = db.define("person", {
		name      : String,
		surname   : String,
		age       : Number,
		male      : Boolean,
		dt        : Date,
		photo     : Buffer
	}, {
		methods: {
			fullName: function () {
				return [ this.name, this.surname ].join(' ');
			}
		}
	});
	Person.hasMany("friends", {
		rate      : Number
	});

	Person.get(1, function (err, Jane) {
		// console.log(Jane);
		Jane.getFriends().only("name").run(function (err, people) {
			console.log(err, people);
		});
	});
});
